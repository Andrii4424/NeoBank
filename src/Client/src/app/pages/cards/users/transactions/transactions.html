@if(isLoaded()){
    <section class="object-info-card">
        <app-transactions-filters
        [selectedSortValue]="selectedSortValue"
        [dateValue]="dateValue"
        [minSumValue]="minSumValue"
        (submitFiltersValues)="submitFilters($event)"
        ></app-transactions-filters>

        <div class="transactions-block">
            @if(transactionsPage?.items ===null || transactionsPage?.items ===undefined || transactionsPage?.items?.length===0){
                @if(hasQuery()){
                    <h1 class="subheading empty-list">{{'NoTransactionsByQuery' |translate}}</h1>
                }
                @else {
                    <h1 class="subheading empty-list">{{'NoTransactions' |translate}}</h1>
                }
            }
            @else {
                <table class="transasctions">
                    <tr class="header-transactions">
                        <td>{{'DateTime' |translate}}</td>
                        <td>{{'Type' |translate}}</td>
                        <td>{{'Amount' |translate}} ({{cardCurrencyText}})</td>
                        <td>{{'Commission' |translate}} ({{cardCurrencyText}})</td>
                        <td>{{'Status' |translate}}</td>
                    </tr>
                    @for(transaction of transactionsPage?.items; track $index){
                        <tr>
                            <td>{{transaction.transactionTime | date:'medium' }}</td>
                            <td>{{getTransactionTypeText(transaction.type)}}</td>
                            <td [class.red]="transaction.senderCardId===cardId" [class.green]="transaction.getterCardId===cardId">
                                @if(transaction.senderCardId===cardId){
                                    <span>-{{transaction.amount}}</span>
                                }
                                @else if(transaction.getterCardId===cardId){
                                    @if(transaction.amountToReceive !=null)
                                    {
                                        <span>+{{transaction.amountToReceive}}</span>
                                    }
                                    @else 
                                    {
                                        <span>+{{transaction.amount}}</span>
                                    }

                                }
                                    
                            </td>
                            @if(transaction.commission!>0 && transaction.senderCardId===cardId){
                                <td class="red">-{{transaction.commission}}</td>
                            }
                            @else if(transaction.getterCardId===cardId){
                                <td>0</td>
                            }
                            @else if(transaction.commission===0 && transaction.senderCardId===cardId){
                                <td>{{transaction.commission}}</td>
                            }
                            <td><span [class.red-status]="transaction.status===TransactionStatus.Failed" [class.orange-status]="transaction.status===TransactionStatus.Pending"
                                [class.green-status]="transaction.status===TransactionStatus.Completed">{{getTransactionStatusText(transaction.status!)}}</span></td>
                        </tr>
                    }
                </table>
            }

            <app-page-switcher
                [pageCount]="transactionsPage?.pageCount"
                [currentPage]="transactionsPage?.pageNumber"
                [hasPreviousPage]="transactionsPage?.hasPreviousPage"
                [hasNextPage]="transactionsPage?.hasNextPage"
                (pageChange)="changePage($event)"
            ></app-page-switcher>

        </div>
    </section>
}