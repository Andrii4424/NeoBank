<app-search
    #searchComponent
    searchPlaceholder="Enter job title"
    [sortValues]="sortValues"
    [filterValues]="filterValues"
    (searchChange)="onSearchChange($event)"
    (filterChange)="onFiltersChange($event)"
    (sortChange)="onSortChange($event)"
>

</app-search>
<h1 class="heading info-header">{{'VacancyInfo' |translate}}</h1>

<section class="content-block">
    @if($vacancy | async; as vacanciesPage){
        @if(vacanciesPage.items.length ===0){
            <h1 class="heading">{{'NoVacancies' |translate}}</h1>
        }
        @else {
            @for(vacancy of vacanciesPage.items; track $index){
                <div class="vacancy-block">
                    <h1 class="subheading">{{vacancy.jobTitle}}</h1>
                    <span class="category">{{vacancy.category}}</span>
                    <hr>
                    <span class="salary">{{'Salary' |translate}}: {{vacancy.salary}}â‚´</span>

                    <div class="buttons">
                        @if(profileService.getRole() === "Admin"){
                            <a class="apply-job">{{'UpdateVacancy' |translate}}</a>
                            <button class="delete-vacancy">{{'DeleteVacancy' | translate}}</button>

                        }
                        @else {
                            <button class="apply-job">{{'ApplyForJob'|translate}}</button>

                        }

                    </div>
                </div>
            }
        }
    }
    @else{
        <app-loading></app-loading>
    }
</section>

@if($vacancy | async; as vacanciesPage){
    <app-page-switcher 
    [currentPage]="vacanciesPage.pageNumber"
    [hasNextPage]="vacanciesPage.hasNextPage"
    [hasPreviousPage]="vacanciesPage.hasPreviousPage"
    [pageCount]="vacanciesPage.pageCount"
    (pageChange)="onPageChange($event)"
    > </app-page-switcher>
}


@if(profileService.getRole() === "Admin"){
    <div class="add-block">
        <a [routerLink]="['/vacancies/add']" class="add-item">{{'AddVacancy' |translate}}</a>
    </div>      
}
