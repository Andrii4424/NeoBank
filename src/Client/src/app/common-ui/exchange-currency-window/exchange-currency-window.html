<div class="modal-overlay">
  <form class="modal-content"[formGroup]="transactionForm" (submit)="onSubmit()" (click)="deleteError()">
    
    <header class="modal-header">
      <h2>{{ 'TransferModal.Exchange.Title' | translate }}</h2>
      <button class="close-button" (click)="cancel()">&times;</button>
    </header>

    <main class="modal-body" >
      
        <div class="form-group" >
            <label for="sender-card">{{'TransferModal.FromCard' | translate}}</label>
            <select id="sender-card" formControlName="senderCardId">
            <option value="" disabled selected>{{'TransferModal.SelectCard' | translate }}</option>
            @if(cards?.length===0 && getSenderCurrency()){
                <h4>{{'TransferModal.NoCards' | translate }}</h4>
            }
            @else {
                @for (card of getSenderCurrency(); track $index) {
                <option [value]="card.id">{{card.cardTariffs.cardName}} ({{card.balance}}{{getCurrencySymbol(card.chosenCurrency)}})</option>
                }
            }
            </select>
        </div>
        <div class="switch-block">
            <img src="assets/images/bank-products/currency/switch.svg" alt="switch" class="switch-img" (click)="switchCards()">
        </div>
        <div class="form-group">
            <label for="getter-card">{{'TransferModal.Exchange.ToCard' | translate }}</label>
            <select id="getter-card" formControlName="getterCardId">
            <option value="" disabled selected>{{'TransferModal.SelectCard' | translate }}</option>
            @if(cards?.length===0 && getGetterCurrency()?.length===0){
                <h4>{{'TransferModal.NoCards' | translate }}</h4>
            }
            @else {
                @for (card of getGetterCurrency(); track $index) {
                <option [value]="card.id">{{card.cardTariffs.cardName}} ({{card.balance}}{{getCurrencySymbol(card.chosenCurrency)}})</option>
                }
            }
            </select>
        </div>


        <div class="form-group">
            <label for="amount">{{'TransferModal.Amount' | translate}} </label>
            <input formControlName="amount" type="number" id="amount" placeholder="0.00">
            <span class="commission" [class.none]="!showGetAmount()">{{'TransferModal.Exchange.YouWillGet' |translate}} {{getAmount | number: '1.2-2'}}{{getterCurrency}}</span>
            <span class="commission" [class.none]="!showCommission()">{{'TransferModal.TransactionFee' |translate}} {{commission | number: '1.2-2'}}{{senderCurrency}}</span>
        </div>
        <div class="error-block">
            <span class="error">{{errorText}} </span>
        </div>
    </main>

    <footer class="modal-footer">
      <button class="btn btn-secondary" (click)="cancel()">{{'TransferModal.Cancel' | translate}}</button>
      <button class="btn btn-primary" type="submit" (click)="$event.stopPropagation()">{{'TransferModal.Exchange.Confirm' |translate}}</button>
    </footer>

  </form>
</div>