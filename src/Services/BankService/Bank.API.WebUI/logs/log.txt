2025-10-17 09:03:46.192 +03:00 [INF] User profile is available. Using 'C:\Users\andre\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-17 09:03:46.776 +03:00 [WRN] No store type was specified for the decimal property 'Balance' on entity type 'UserCardsEntity'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-17 09:03:46.778 +03:00 [WRN] No store type was specified for the decimal property 'CreditLimit' on entity type 'UserCardsEntity'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-17 09:03:47.799 +03:00 [INF] Executed DbCommand (72ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-17 09:03:47.863 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-17 09:03:47.875 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarPath], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsVerified], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[Patronymic], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[Surname], [a].[TaxId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-17 09:03:47.928 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-10-17 09:03:47.978 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='?' (DbType = Guid), @__get_Item_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__get_Item_0 AND [a].[RoleId] = @__get_Item_1
2025-10-17 09:03:48.317 +03:00 [INF] Now listening on: https://localhost:7280
2025-10-17 09:03:48.317 +03:00 [INF] Now listening on: http://localhost:5106
2025-10-17 09:03:48.387 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-17 09:03:48.387 +03:00 [INF] Hosting environment: Development
2025-10-17 09:03:48.388 +03:00 [INF] Content root path: D:\FullStack\NeoBank\src\Services\BankService\Bank.API.WebUI
2025-10-17 09:03:48.670 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/_framework/aspnetcore-browser-refresh.js - null null
2025-10-17 09:03:48.670 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/_vs/browserLink - null null
2025-10-17 09:03:48.696 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/_framework/aspnetcore-browser-refresh.js - 200 16513 application/javascript; charset=utf-8 32.2515ms
2025-10-17 09:03:48.719 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/_vs/browserLink - 200 null text/javascript; charset=UTF-8 56.8167ms
2025-10-17 09:03:48.756 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/swagger/v1/swagger.json - null null
2025-10-17 09:03:48.791 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 34.7886ms
2025-10-17 09:03:52.645 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7280/api/Account/GetRole - null null
2025-10-17 09:03:52.646 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7280/api/Profile/Me - null null
2025-10-17 09:03:52.677 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:03:52.677 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:03:52.680 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7280/api/Profile/Me - 204 null null 33.9036ms
2025-10-17 09:03:52.681 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7280/api/Account/GetRole - 204 null null 36.1761ms
2025-10-17 09:03:52.683 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Profile/Me - null null
2025-10-17 09:03:52.683 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Account/GetRole - null null
2025-10-17 09:03:52.690 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:03:52.690 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:03:53.577 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7280/api/Bank - null null
2025-10-17 09:03:53.579 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:03:53.580 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7280/api/Bank - 204 null null 3.5805ms
2025-10-17 09:03:53.582 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Bank - null null
2025-10-17 09:03:53.586 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:03:53.770 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/16/2025 16:59:03', Current time (UTC): '10/17/2025 06:03:53'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-10-17 09:03:53.770 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/16/2025 16:59:03', Current time (UTC): '10/17/2025 06:03:53'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-10-17 09:03:53.770 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/16/2025 16:59:03', Current time (UTC): '10/17/2025 06:03:53'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-10-17 09:03:53.788 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/16/2025 16:59:03', Current time (UTC): '10/17/2025 06:03:53'.
2025-10-17 09:03:53.791 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/16/2025 16:59:03', Current time (UTC): '10/17/2025 06:03:53'.
2025-10-17 09:03:53.793 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/16/2025 16:59:03', Current time (UTC): '10/17/2025 06:03:53'.
2025-10-17 09:03:53.797 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.BankController.BankInfo (Bank.API.WebUI)'
2025-10-17 09:03:53.797 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI)'
2025-10-17 09:03:53.800 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-17 09:03:53.805 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-17 09:03:53.806 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Profile/Me - 401 0 null 1123.0957ms
2025-10-17 09:03:53.810 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7280/api/Account/Refresh - null 0
2025-10-17 09:03:53.812 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:03:53.813 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.AccountController.Refresh (Bank.API.WebUI)'
2025-10-17 09:03:53.814 +03:00 [INF] Route matched with {action = "BankInfo", controller = "Bank"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BankInfo() on controller Bank.API.WebUI.Controllers.BankController (Bank.API.WebUI).
2025-10-17 09:03:53.814 +03:00 [INF] Route matched with {action = "GetRole", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRole() on controller Bank.API.WebUI.Controllers.AccountController (Bank.API.WebUI).
2025-10-17 09:03:53.816 +03:00 [INF] Route matched with {action = "Refresh", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh() on controller Bank.API.WebUI.Controllers.AccountController (Bank.API.WebUI).
2025-10-17 09:03:53.896 +03:00 [INF] Getting info about bank
2025-10-17 09:03:53.900 +03:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-10-17 09:03:53.906 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[ActiveClientsCount], [b].[BankDirectorFullName], [b].[BankFounderFullName], [b].[BlockedClientsCount], [b].[Capitalization], [b].[ClientsCount], [b].[ContactEmail], [b].[ContactPhone], [b].[EmployeesCount], [b].[EstablishedDate], [b].[HasLicense], [b].[LegalAddress], [b].[MfoCode], [b].[Name], [b].[PercentageCommissionForBuyingCurrency], [b].[PercentageCommissionForSellingCurrency], [b].[Rating], [b].[SwiftCode], [b].[TaxId], [b].[UpdatedAt]
FROM [BankInfo] AS [b]
WHERE [b].[Id] = @__id_0
2025-10-17 09:03:53.919 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarPath], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsVerified], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[Patronymic], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[Surname], [a].[TaxId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[RefreshToken] = @__refreshToken_0
2025-10-17 09:03:53.927 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI) in 107.4609ms
2025-10-17 09:03:53.928 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI)'
2025-10-17 09:03:53.929 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Account/GetRole - 401 null application/problem+json; charset=utf-8 1246.0427ms
2025-10-17 09:03:53.936 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-10-17 09:03:53.947 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.DTO.BankDto'.
2025-10-17 09:03:53.956 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-10-17 09:03:53.965 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.BankController.BankInfo (Bank.API.WebUI) in 148.6464ms
2025-10-17 09:03:53.967 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.BankController.BankInfo (Bank.API.WebUI)'
2025-10-17 09:03:53.970 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Bank - 200 null application/json; charset=utf-8 387.9633ms
2025-10-17 09:03:53.974 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarPath], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsVerified], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[Patronymic], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[Surname], [a].[TaxId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-10-17 09:03:54.050 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p23='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p24='?' (Size = 4000), @p3='?' (DbType = Date), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime2), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [AvatarPath] = @p1, [ConcurrencyStamp] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FirstName] = @p6, [IsVerified] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [Patronymic] = @p13, [PhoneNumber] = @p14, [PhoneNumberConfirmed] = @p15, [RefreshToken] = @p16, [RefreshTokenExpiryTime] = @p17, [SecurityStamp] = @p18, [Surname] = @p19, [TaxId] = @p20, [TwoFactorEnabled] = @p21, [UserName] = @p22
OUTPUT 1
WHERE [Id] = @p23 AND [ConcurrencyStamp] = @p24;
2025-10-17 09:03:54.064 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.DTOs.Identity.AccessTokenDto'.
2025-10-17 09:03:54.069 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.AccountController.Refresh (Bank.API.WebUI) in 249.7976ms
2025-10-17 09:03:54.071 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.AccountController.Refresh (Bank.API.WebUI)'
2025-10-17 09:03:54.072 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7280/api/Account/Refresh - 200 null application/json; charset=utf-8 262.2042ms
2025-10-17 09:03:54.075 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Profile/Me - null null
2025-10-17 09:03:54.075 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Account/GetRole - null null
2025-10-17 09:03:54.077 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:03:54.078 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:03:54.086 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI)'
2025-10-17 09:03:54.087 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.ProfileController.Me (Bank.API.WebUI)'
2025-10-17 09:03:54.087 +03:00 [INF] Route matched with {action = "GetRole", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRole() on controller Bank.API.WebUI.Controllers.AccountController (Bank.API.WebUI).
2025-10-17 09:03:54.090 +03:00 [INF] Route matched with {action = "Me", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Me() on controller Bank.API.WebUI.Controllers.ProfileController (Bank.API.WebUI).
2025-10-17 09:03:54.103 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarPath], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsVerified], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[Patronymic], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[Surname], [a].[TaxId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__get_Item_0
2025-10-17 09:03:54.103 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarPath], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsVerified], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[Patronymic], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[Surname], [a].[TaxId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__get_Item_0
2025-10-17 09:03:54.109 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.DTOs.Identity.ProfileDto'.
2025-10-17 09:03:54.109 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-17 09:03:54.113 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI) in 23.7457ms
2025-10-17 09:03:54.114 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI)'
2025-10-17 09:03:54.116 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Account/GetRole - 200 null application/json; charset=utf-8 40.9214ms
2025-10-17 09:03:54.121 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.ProfileController.Me (Bank.API.WebUI) in 30.0702ms
2025-10-17 09:03:54.123 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.ProfileController.Me (Bank.API.WebUI)'
2025-10-17 09:03:54.124 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Profile/Me - 200 null application/json; charset=utf-8 48.8581ms
2025-10-17 09:05:56.079 +03:00 [INF] User profile is available. Using 'C:\Users\andre\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-17 09:05:56.533 +03:00 [WRN] No store type was specified for the decimal property 'Balance' on entity type 'UserCardsEntity'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-17 09:05:56.536 +03:00 [WRN] No store type was specified for the decimal property 'CreditLimit' on entity type 'UserCardsEntity'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-17 09:05:57.090 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-17 09:05:57.152 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-17 09:05:57.163 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarPath], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsVerified], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[Patronymic], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[Surname], [a].[TaxId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-17 09:05:57.212 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-10-17 09:05:57.249 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='?' (DbType = Guid), @__get_Item_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__get_Item_0 AND [a].[RoleId] = @__get_Item_1
2025-10-17 09:05:57.531 +03:00 [INF] Now listening on: https://localhost:7280
2025-10-17 09:05:57.533 +03:00 [INF] Now listening on: http://localhost:5106
2025-10-17 09:05:57.607 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-17 09:05:57.608 +03:00 [INF] Hosting environment: Development
2025-10-17 09:05:57.610 +03:00 [INF] Content root path: D:\FullStack\NeoBank\src\Services\BankService\Bank.API.WebUI
2025-10-17 09:05:58.208 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/_vs/browserLink - null null
2025-10-17 09:05:58.208 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/_framework/aspnetcore-browser-refresh.js - null null
2025-10-17 09:05:58.228 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/_framework/aspnetcore-browser-refresh.js - 200 16513 application/javascript; charset=utf-8 26.3511ms
2025-10-17 09:05:58.245 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.382ms
2025-10-17 09:05:58.275 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/swagger/v1/swagger.json - null null
2025-10-17 09:05:58.311 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 36.2331ms
2025-10-17 09:06:01.443 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7280/api/Account/GetRole - null null
2025-10-17 09:06:01.443 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7280/api/Bank - null null
2025-10-17 09:06:01.443 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7280/api/Profile/Me - null null
2025-10-17 09:06:01.477 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:06:01.477 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:06:01.477 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:06:01.480 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7280/api/Account/GetRole - 204 null null 37.7195ms
2025-10-17 09:06:01.480 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7280/api/Profile/Me - 204 null null 37.9607ms
2025-10-17 09:06:01.480 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7280/api/Bank - 204 null null 37.9757ms
2025-10-17 09:06:01.483 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Account/GetRole - null null
2025-10-17 09:06:01.483 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Bank - null null
2025-10-17 09:06:01.483 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Profile/Me - null null
2025-10-17 09:06:01.490 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:06:01.490 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:06:01.490 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:06:01.596 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI)'
2025-10-17 09:06:01.596 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.BankController.BankInfo (Bank.API.WebUI)'
2025-10-17 09:06:01.596 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.ProfileController.Me (Bank.API.WebUI)'
2025-10-17 09:06:01.617 +03:00 [INF] Route matched with {action = "Me", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Me() on controller Bank.API.WebUI.Controllers.ProfileController (Bank.API.WebUI).
2025-10-17 09:06:01.617 +03:00 [INF] Route matched with {action = "GetRole", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRole() on controller Bank.API.WebUI.Controllers.AccountController (Bank.API.WebUI).
2025-10-17 09:06:01.617 +03:00 [INF] Route matched with {action = "BankInfo", controller = "Bank"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BankInfo() on controller Bank.API.WebUI.Controllers.BankController (Bank.API.WebUI).
2025-10-17 09:06:01.746 +03:00 [INF] Getting info about bank
2025-10-17 09:06:01.796 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Account/GetRole - null null
2025-10-17 09:06:01.796 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[ActiveClientsCount], [b].[BankDirectorFullName], [b].[BankFounderFullName], [b].[BlockedClientsCount], [b].[Capitalization], [b].[ClientsCount], [b].[ContactEmail], [b].[ContactPhone], [b].[EmployeesCount], [b].[EstablishedDate], [b].[HasLicense], [b].[LegalAddress], [b].[MfoCode], [b].[Name], [b].[PercentageCommissionForBuyingCurrency], [b].[PercentageCommissionForSellingCurrency], [b].[Rating], [b].[SwiftCode], [b].[TaxId], [b].[UpdatedAt]
FROM [BankInfo] AS [b]
WHERE [b].[Id] = @__id_0
2025-10-17 09:06:01.814 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Profile/Me - null null
2025-10-17 09:06:01.815 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:06:01.823 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:06:01.816 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Bank - null null
2025-10-17 09:06:01.829 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI)'
2025-10-17 09:06:01.829 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.ProfileController.Me (Bank.API.WebUI)'
2025-10-17 09:06:01.831 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarPath], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsVerified], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[Patronymic], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[Surname], [a].[TaxId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__get_Item_0
2025-10-17 09:06:01.833 +03:00 [INF] Route matched with {action = "Me", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Me() on controller Bank.API.WebUI.Controllers.ProfileController (Bank.API.WebUI).
2025-10-17 09:06:01.832 +03:00 [INF] Route matched with {action = "GetRole", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRole() on controller Bank.API.WebUI.Controllers.AccountController (Bank.API.WebUI).
2025-10-17 09:06:01.831 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:06:01.840 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarPath], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsVerified], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[Patronymic], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[Surname], [a].[TaxId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__get_Item_0
2025-10-17 09:06:01.844 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.BankController.BankInfo (Bank.API.WebUI)'
2025-10-17 09:06:01.848 +03:00 [INF] Route matched with {action = "BankInfo", controller = "Bank"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BankInfo() on controller Bank.API.WebUI.Controllers.BankController (Bank.API.WebUI).
2025-10-17 09:06:01.850 +03:00 [INF] Getting info about bank
2025-10-17 09:06:01.854 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarPath], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsVerified], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[Patronymic], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[Surname], [a].[TaxId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__get_Item_0
2025-10-17 09:06:01.855 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarPath], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsVerified], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[Patronymic], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[Surname], [a].[TaxId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__get_Item_0
2025-10-17 09:06:01.860 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-17 09:06:01.860 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.DTOs.Identity.ProfileDto'.
2025-10-17 09:06:01.863 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-17 09:06:01.860 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.DTOs.Identity.ProfileDto'.
2025-10-17 09:06:01.868 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[ActiveClientsCount], [b].[BankDirectorFullName], [b].[BankFounderFullName], [b].[BlockedClientsCount], [b].[Capitalization], [b].[ClientsCount], [b].[ContactEmail], [b].[ContactPhone], [b].[EmployeesCount], [b].[EstablishedDate], [b].[HasLicense], [b].[LegalAddress], [b].[MfoCode], [b].[Name], [b].[PercentageCommissionForBuyingCurrency], [b].[PercentageCommissionForSellingCurrency], [b].[Rating], [b].[SwiftCode], [b].[TaxId], [b].[UpdatedAt]
FROM [BankInfo] AS [b]
WHERE [b].[Id] = @__id_0
2025-10-17 09:06:01.879 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI) in 245.1983ms
2025-10-17 09:06:01.879 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI) in 33.0569ms
2025-10-17 09:06:01.880 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI)'
2025-10-17 09:06:01.881 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI)'
2025-10-17 09:06:01.881 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.DTO.BankDto'.
2025-10-17 09:06:01.881 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.DTO.BankDto'.
2025-10-17 09:06:01.886 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Account/GetRole - 200 null application/json; charset=utf-8 90.4377ms
2025-10-17 09:06:01.886 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Account/GetRole - 499 null application/json; charset=utf-8 403.2821ms
2025-10-17 09:06:01.893 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.ProfileController.Me (Bank.API.WebUI) in 51.5525ms
2025-10-17 09:06:01.893 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.ProfileController.Me (Bank.API.WebUI) in 265.681ms
2025-10-17 09:06:01.894 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.ProfileController.Me (Bank.API.WebUI)'
2025-10-17 09:06:01.895 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.ProfileController.Me (Bank.API.WebUI)'
2025-10-17 09:06:01.897 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Profile/Me - 200 null application/json; charset=utf-8 82.9554ms
2025-10-17 09:06:01.898 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Profile/Me - 499 null application/json; charset=utf-8 414.6614ms
2025-10-17 09:06:01.900 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.BankController.BankInfo (Bank.API.WebUI) in 50.7547ms
2025-10-17 09:06:01.900 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.BankController.BankInfo (Bank.API.WebUI) in 266.4347ms
2025-10-17 09:06:01.905 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.BankController.BankInfo (Bank.API.WebUI)'
2025-10-17 09:06:01.906 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.BankController.BankInfo (Bank.API.WebUI)'
2025-10-17 09:06:01.907 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Bank - 200 null application/json; charset=utf-8 90.704ms
2025-10-17 09:06:01.908 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Bank - 499 null application/json; charset=utf-8 425.0173ms
2025-10-17 09:06:03.281 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Bank - null null
2025-10-17 09:06:03.286 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:06:03.288 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.BankController.BankInfo (Bank.API.WebUI)'
2025-10-17 09:06:03.290 +03:00 [INF] Route matched with {action = "BankInfo", controller = "Bank"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BankInfo() on controller Bank.API.WebUI.Controllers.BankController (Bank.API.WebUI).
2025-10-17 09:06:03.295 +03:00 [INF] Getting info about bank
2025-10-17 09:06:03.300 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[ActiveClientsCount], [b].[BankDirectorFullName], [b].[BankFounderFullName], [b].[BlockedClientsCount], [b].[Capitalization], [b].[ClientsCount], [b].[ContactEmail], [b].[ContactPhone], [b].[EmployeesCount], [b].[EstablishedDate], [b].[HasLicense], [b].[LegalAddress], [b].[MfoCode], [b].[Name], [b].[PercentageCommissionForBuyingCurrency], [b].[PercentageCommissionForSellingCurrency], [b].[Rating], [b].[SwiftCode], [b].[TaxId], [b].[UpdatedAt]
FROM [BankInfo] AS [b]
WHERE [b].[Id] = @__id_0
2025-10-17 09:06:03.308 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.DTO.BankDto'.
2025-10-17 09:06:03.309 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.BankController.BankInfo (Bank.API.WebUI) in 16.267ms
2025-10-17 09:06:03.311 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.BankController.BankInfo (Bank.API.WebUI)'
2025-10-17 09:06:03.313 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Bank - 200 null application/json; charset=utf-8 31.7099ms
2025-10-17 09:06:04.136 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Account/GetRole - null null
2025-10-17 09:06:04.136 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Profile/Me - null null
2025-10-17 09:06:04.136 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Bank - null null
2025-10-17 09:06:04.139 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:06:04.141 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:06:04.142 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:06:04.143 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI)'
2025-10-17 09:06:04.144 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.ProfileController.Me (Bank.API.WebUI)'
2025-10-17 09:06:04.145 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.BankController.BankInfo (Bank.API.WebUI)'
2025-10-17 09:06:04.145 +03:00 [INF] Route matched with {action = "GetRole", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRole() on controller Bank.API.WebUI.Controllers.AccountController (Bank.API.WebUI).
2025-10-17 09:06:04.146 +03:00 [INF] Route matched with {action = "Me", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Me() on controller Bank.API.WebUI.Controllers.ProfileController (Bank.API.WebUI).
2025-10-17 09:06:04.147 +03:00 [INF] Route matched with {action = "BankInfo", controller = "Bank"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BankInfo() on controller Bank.API.WebUI.Controllers.BankController (Bank.API.WebUI).
2025-10-17 09:06:04.152 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarPath], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsVerified], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[Patronymic], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[Surname], [a].[TaxId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__get_Item_0
2025-10-17 09:06:04.154 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarPath], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsVerified], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[Patronymic], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[Surname], [a].[TaxId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__get_Item_0
2025-10-17 09:06:04.155 +03:00 [INF] Getting info about bank
2025-10-17 09:06:04.156 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-17 09:06:04.158 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.DTOs.Identity.ProfileDto'.
2025-10-17 09:06:04.160 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[ActiveClientsCount], [b].[BankDirectorFullName], [b].[BankFounderFullName], [b].[BlockedClientsCount], [b].[Capitalization], [b].[ClientsCount], [b].[ContactEmail], [b].[ContactPhone], [b].[EmployeesCount], [b].[EstablishedDate], [b].[HasLicense], [b].[LegalAddress], [b].[MfoCode], [b].[Name], [b].[PercentageCommissionForBuyingCurrency], [b].[PercentageCommissionForSellingCurrency], [b].[Rating], [b].[SwiftCode], [b].[TaxId], [b].[UpdatedAt]
FROM [BankInfo] AS [b]
WHERE [b].[Id] = @__id_0
2025-10-17 09:06:04.160 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI) in 11.2807ms
2025-10-17 09:06:04.161 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.ProfileController.Me (Bank.API.WebUI) in 10.5493ms
2025-10-17 09:06:04.163 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.DTO.BankDto'.
2025-10-17 09:06:04.163 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI)'
2025-10-17 09:06:04.164 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.ProfileController.Me (Bank.API.WebUI)'
2025-10-17 09:06:04.165 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.BankController.BankInfo (Bank.API.WebUI) in 11.3052ms
2025-10-17 09:06:04.165 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Account/GetRole - 200 null application/json; charset=utf-8 28.9549ms
2025-10-17 09:06:04.166 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Profile/Me - 200 null application/json; charset=utf-8 29.4194ms
2025-10-17 09:06:04.167 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.BankController.BankInfo (Bank.API.WebUI)'
2025-10-17 09:06:04.171 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Bank - 200 null application/json; charset=utf-8 34.549ms
2025-10-17 09:06:05.735 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Account/GetRole - null null
2025-10-17 09:06:05.735 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Profile/Me - null null
2025-10-17 09:06:05.735 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Bank - null null
2025-10-17 09:06:05.737 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:06:05.739 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:06:05.741 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:06:05.742 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI)'
2025-10-17 09:06:05.743 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.ProfileController.Me (Bank.API.WebUI)'
2025-10-17 09:06:05.743 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.BankController.BankInfo (Bank.API.WebUI)'
2025-10-17 09:06:05.744 +03:00 [INF] Route matched with {action = "GetRole", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRole() on controller Bank.API.WebUI.Controllers.AccountController (Bank.API.WebUI).
2025-10-17 09:06:05.745 +03:00 [INF] Route matched with {action = "Me", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Me() on controller Bank.API.WebUI.Controllers.ProfileController (Bank.API.WebUI).
2025-10-17 09:06:05.746 +03:00 [INF] Route matched with {action = "BankInfo", controller = "Bank"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BankInfo() on controller Bank.API.WebUI.Controllers.BankController (Bank.API.WebUI).
2025-10-17 09:06:05.751 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarPath], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsVerified], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[Patronymic], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[Surname], [a].[TaxId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__get_Item_0
2025-10-17 09:06:05.753 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarPath], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsVerified], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[Patronymic], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[Surname], [a].[TaxId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__get_Item_0
2025-10-17 09:06:05.753 +03:00 [INF] Getting info about bank
2025-10-17 09:06:05.756 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-17 09:06:05.759 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.DTOs.Identity.ProfileDto'.
2025-10-17 09:06:05.762 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[ActiveClientsCount], [b].[BankDirectorFullName], [b].[BankFounderFullName], [b].[BlockedClientsCount], [b].[Capitalization], [b].[ClientsCount], [b].[ContactEmail], [b].[ContactPhone], [b].[EmployeesCount], [b].[EstablishedDate], [b].[HasLicense], [b].[LegalAddress], [b].[MfoCode], [b].[Name], [b].[PercentageCommissionForBuyingCurrency], [b].[PercentageCommissionForSellingCurrency], [b].[Rating], [b].[SwiftCode], [b].[TaxId], [b].[UpdatedAt]
FROM [BankInfo] AS [b]
WHERE [b].[Id] = @__id_0
2025-10-17 09:06:05.763 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI) in 14.9059ms
2025-10-17 09:06:05.764 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.ProfileController.Me (Bank.API.WebUI) in 13.9398ms
2025-10-17 09:06:05.767 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.DTO.BankDto'.
2025-10-17 09:06:05.769 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI)'
2025-10-17 09:06:05.770 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.ProfileController.Me (Bank.API.WebUI)'
2025-10-17 09:06:05.772 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.BankController.BankInfo (Bank.API.WebUI) in 19.3577ms
2025-10-17 09:06:05.773 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Account/GetRole - 200 null application/json; charset=utf-8 38.5081ms
2025-10-17 09:06:05.774 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Profile/Me - 200 null application/json; charset=utf-8 38.9966ms
2025-10-17 09:06:05.775 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.BankController.BankInfo (Bank.API.WebUI)'
2025-10-17 09:06:05.780 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Bank - 200 null application/json; charset=utf-8 45.0441ms
2025-10-17 09:06:11.304 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7280/api/Account/GetRole - null null
2025-10-17 09:06:11.304 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7280/api/Profile/Me - null null
2025-10-17 09:06:11.304 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7280/api/Bank - null null
2025-10-17 09:06:11.307 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:06:11.309 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:06:11.311 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:06:11.312 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7280/api/Account/GetRole - 204 null null 8.5764ms
2025-10-17 09:06:11.313 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7280/api/Profile/Me - 204 null null 9.3055ms
2025-10-17 09:06:11.314 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7280/api/Bank - 204 null null 10.0156ms
2025-10-17 09:06:11.318 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Account/GetRole - null null
2025-10-17 09:06:11.318 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Profile/Me - null null
2025-10-17 09:06:11.319 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Bank - null null
2025-10-17 09:06:11.328 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:06:11.330 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:06:11.333 +03:00 [INF] CORS policy execution successful.
2025-10-17 09:06:11.334 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI)'
2025-10-17 09:06:11.335 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.ProfileController.Me (Bank.API.WebUI)'
2025-10-17 09:06:11.336 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.BankController.BankInfo (Bank.API.WebUI)'
2025-10-17 09:06:11.337 +03:00 [INF] Route matched with {action = "GetRole", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRole() on controller Bank.API.WebUI.Controllers.AccountController (Bank.API.WebUI).
2025-10-17 09:06:11.338 +03:00 [INF] Route matched with {action = "Me", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Me() on controller Bank.API.WebUI.Controllers.ProfileController (Bank.API.WebUI).
2025-10-17 09:06:11.343 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarPath], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsVerified], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[Patronymic], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[Surname], [a].[TaxId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__get_Item_0
2025-10-17 09:06:11.339 +03:00 [INF] Route matched with {action = "BankInfo", controller = "Bank"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BankInfo() on controller Bank.API.WebUI.Controllers.BankController (Bank.API.WebUI).
2025-10-17 09:06:11.345 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarPath], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsVerified], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[Patronymic], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[Surname], [a].[TaxId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__get_Item_0
2025-10-17 09:06:11.349 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-17 09:06:11.351 +03:00 [INF] Getting info about bank
2025-10-17 09:06:11.354 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.DTOs.Identity.ProfileDto'.
2025-10-17 09:06:11.355 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI) in 13.8443ms
2025-10-17 09:06:11.358 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[ActiveClientsCount], [b].[BankDirectorFullName], [b].[BankFounderFullName], [b].[BlockedClientsCount], [b].[Capitalization], [b].[ClientsCount], [b].[ContactEmail], [b].[ContactPhone], [b].[EmployeesCount], [b].[EstablishedDate], [b].[HasLicense], [b].[LegalAddress], [b].[MfoCode], [b].[Name], [b].[PercentageCommissionForBuyingCurrency], [b].[PercentageCommissionForSellingCurrency], [b].[Rating], [b].[SwiftCode], [b].[TaxId], [b].[UpdatedAt]
FROM [BankInfo] AS [b]
WHERE [b].[Id] = @__id_0
2025-10-17 09:06:11.358 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.ProfileController.Me (Bank.API.WebUI) in 15.0346ms
2025-10-17 09:06:11.359 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI)'
2025-10-17 09:06:11.364 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.DTO.BankDto'.
2025-10-17 09:06:11.364 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.ProfileController.Me (Bank.API.WebUI)'
2025-10-17 09:06:11.365 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Account/GetRole - 200 null application/json; charset=utf-8 47.551ms
2025-10-17 09:06:11.366 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.BankController.BankInfo (Bank.API.WebUI) in 15.6031ms
2025-10-17 09:06:11.367 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Profile/Me - 200 null application/json; charset=utf-8 48.8468ms
2025-10-17 09:06:11.372 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.BankController.BankInfo (Bank.API.WebUI)'
2025-10-17 09:06:11.375 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Bank - 200 null application/json; charset=utf-8 55.8113ms
2025-10-17 12:02:20.971 +03:00 [INF] User profile is available. Using 'C:\Users\andre\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-17 12:02:21.475 +03:00 [WRN] No store type was specified for the decimal property 'Balance' on entity type 'UserCardsEntity'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-17 12:02:21.478 +03:00 [WRN] No store type was specified for the decimal property 'CreditLimit' on entity type 'UserCardsEntity'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-17 12:02:22.792 +03:00 [INF] Executed DbCommand (100ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-17 12:02:23.256 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2025-10-17 12:02:23.270 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[AvatarPath], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsVerified], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[Patronymic], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[Surname], [a].[TaxId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-17 12:02:23.322 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2025-10-17 12:02:23.358 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='?' (DbType = Guid), @__get_Item_1='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__get_Item_0 AND [a].[RoleId] = @__get_Item_1
2025-10-17 12:02:23.734 +03:00 [INF] Now listening on: https://localhost:7280
2025-10-17 12:02:23.735 +03:00 [INF] Now listening on: http://localhost:5106
2025-10-17 12:02:23.822 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-17 12:02:23.824 +03:00 [INF] Hosting environment: Development
2025-10-17 12:02:23.825 +03:00 [INF] Content root path: D:\FullStack\NeoBank\src\Services\BankService\Bank.API.WebUI
2025-10-17 12:02:25.196 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/_vs/browserLink - null null
2025-10-17 12:02:25.196 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/_framework/aspnetcore-browser-refresh.js - null null
2025-10-17 12:02:25.228 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/_framework/aspnetcore-browser-refresh.js - 200 16513 application/javascript; charset=utf-8 40.0534ms
2025-10-17 12:02:25.289 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/_vs/browserLink - 200 null text/javascript; charset=UTF-8 101.6038ms
2025-10-17 12:02:25.321 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/swagger/v1/swagger.json - null null
2025-10-17 12:02:25.351 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 29.7235ms
2025-10-17 12:02:27.011 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/swagger/index.html - null null
2025-10-17 12:02:27.108 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/swagger/index.html - 200 null text/html;charset=utf-8 97.5752ms
2025-10-17 12:02:27.119 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/_framework/aspnetcore-browser-refresh.js - null null
2025-10-17 12:02:27.120 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/_vs/browserLink - null null
2025-10-17 12:02:27.125 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/_framework/aspnetcore-browser-refresh.js - 200 16513 application/javascript; charset=utf-8 5.6322ms
2025-10-17 12:02:27.134 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/_vs/browserLink - 200 null text/javascript; charset=UTF-8 14.2003ms
2025-10-17 12:02:27.171 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/swagger/v1/swagger.json - null null
2025-10-17 12:02:27.186 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 15.0759ms
2025-10-17 12:03:56.707 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7280/api/Bank - null null
2025-10-17 12:03:56.711 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7280/api/Account/GetRole - null null
2025-10-17 12:03:56.711 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7280/api/Profile/Me - null null
2025-10-17 12:03:56.847 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:03:56.847 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:03:56.847 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:03:56.850 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7280/api/Account/GetRole - 204 null null 139.1248ms
2025-10-17 12:03:56.850 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7280/api/Profile/Me - 204 null null 139.7078ms
2025-10-17 12:03:56.850 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7280/api/Bank - 204 null null 143.3943ms
2025-10-17 12:03:56.853 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Account/GetRole - null null
2025-10-17 12:03:56.854 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Profile/Me - null null
2025-10-17 12:03:56.854 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Bank - null null
2025-10-17 12:03:56.864 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:03:56.864 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:03:56.864 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:03:57.871 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/17/2025 06:18:53', Current time (UTC): '10/17/2025 09:03:57'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-10-17 12:03:57.871 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/17/2025 06:18:53', Current time (UTC): '10/17/2025 09:03:57'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-10-17 12:03:57.871 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/17/2025 06:18:53', Current time (UTC): '10/17/2025 09:03:57'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-10-17 12:03:57.890 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/17/2025 06:18:53', Current time (UTC): '10/17/2025 09:03:57'.
2025-10-17 12:03:57.891 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/17/2025 06:18:53', Current time (UTC): '10/17/2025 09:03:57'.
2025-10-17 12:03:57.893 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/17/2025 06:18:53', Current time (UTC): '10/17/2025 09:03:57'.
2025-10-17 12:03:57.897 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.BankController.BankInfo (Bank.API.WebUI)'
2025-10-17 12:03:57.897 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI)'
2025-10-17 12:03:57.899 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-17 12:03:57.904 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-17 12:03:57.907 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Profile/Me - 401 0 null 1053.2242ms
2025-10-17 12:03:57.910 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7280/api/Account/Refresh - null 0
2025-10-17 12:03:57.912 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:03:57.913 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.AccountController.Refresh (Bank.API.WebUI)'
2025-10-17 12:03:57.913 +03:00 [INF] Route matched with {action = "BankInfo", controller = "Bank"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BankInfo() on controller Bank.API.WebUI.Controllers.BankController (Bank.API.WebUI).
2025-10-17 12:03:57.913 +03:00 [INF] Route matched with {action = "GetRole", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRole() on controller Bank.API.WebUI.Controllers.AccountController (Bank.API.WebUI).
2025-10-17 12:03:57.916 +03:00 [INF] Route matched with {action = "Refresh", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh() on controller Bank.API.WebUI.Controllers.AccountController (Bank.API.WebUI).
2025-10-17 12:03:57.989 +03:00 [INF] Getting info about bank
2025-10-17 12:03:57.992 +03:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-10-17 12:03:57.998 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[ActiveClientsCount], [b].[BankDirectorFullName], [b].[BankFounderFullName], [b].[BlockedClientsCount], [b].[Capitalization], [b].[ClientsCount], [b].[ContactEmail], [b].[ContactPhone], [b].[EmployeesCount], [b].[EstablishedDate], [b].[HasLicense], [b].[LegalAddress], [b].[MfoCode], [b].[Name], [b].[PercentageCommissionForBuyingCurrency], [b].[PercentageCommissionForSellingCurrency], [b].[Rating], [b].[SwiftCode], [b].[TaxId], [b].[UpdatedAt]
FROM [BankInfo] AS [b]
WHERE [b].[Id] = @__id_0
2025-10-17 12:03:58.014 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarPath], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsVerified], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[Patronymic], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[Surname], [a].[TaxId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[RefreshToken] = @__refreshToken_0
2025-10-17 12:03:58.019 +03:00 [INF] Trying to get access token for user with email: admin@neobank.com
2025-10-17 12:03:58.020 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI) in 100.7754ms
2025-10-17 12:03:58.021 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI)'
2025-10-17 12:03:58.023 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Account/GetRole - 401 null application/problem+json; charset=utf-8 1169.3846ms
2025-10-17 12:03:58.033 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-10-17 12:03:58.043 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.DTO.BankDto'.
2025-10-17 12:03:58.054 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-10-17 12:03:58.061 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.BankController.BankInfo (Bank.API.WebUI) in 145.3313ms
2025-10-17 12:03:58.063 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.BankController.BankInfo (Bank.API.WebUI)'
2025-10-17 12:03:58.067 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Bank - 200 null application/json; charset=utf-8 1213.5402ms
2025-10-17 12:03:58.075 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarPath], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsVerified], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[Patronymic], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[Surname], [a].[TaxId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-10-17 12:03:58.154 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p23='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p24='?' (Size = 4000), @p3='?' (DbType = Date), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime2), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [AvatarPath] = @p1, [ConcurrencyStamp] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FirstName] = @p6, [IsVerified] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [Patronymic] = @p13, [PhoneNumber] = @p14, [PhoneNumberConfirmed] = @p15, [RefreshToken] = @p16, [RefreshTokenExpiryTime] = @p17, [SecurityStamp] = @p18, [Surname] = @p19, [TaxId] = @p20, [TwoFactorEnabled] = @p21, [UserName] = @p22
OUTPUT 1
WHERE [Id] = @p23 AND [ConcurrencyStamp] = @p24;
2025-10-17 12:03:58.165 +03:00 [INF] Success getting access token for user with email: admin@neobank.com
2025-10-17 12:03:58.169 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.DTOs.Identity.AccessTokenDto'.
2025-10-17 12:03:58.174 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.AccountController.Refresh (Bank.API.WebUI) in 255.0566ms
2025-10-17 12:03:58.176 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.AccountController.Refresh (Bank.API.WebUI)'
2025-10-17 12:03:58.178 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7280/api/Account/Refresh - 200 null application/json; charset=utf-8 267.9074ms
2025-10-17 12:03:58.181 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Profile/Me - null null
2025-10-17 12:03:58.182 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Account/GetRole - null null
2025-10-17 12:03:58.183 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:03:58.184 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:03:58.192 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI)'
2025-10-17 12:03:58.193 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.ProfileController.Me (Bank.API.WebUI)'
2025-10-17 12:03:58.194 +03:00 [INF] Route matched with {action = "GetRole", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRole() on controller Bank.API.WebUI.Controllers.AccountController (Bank.API.WebUI).
2025-10-17 12:03:58.197 +03:00 [INF] Route matched with {action = "Me", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Me() on controller Bank.API.WebUI.Controllers.ProfileController (Bank.API.WebUI).
2025-10-17 12:03:58.211 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarPath], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsVerified], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[Patronymic], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[Surname], [a].[TaxId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__get_Item_0
2025-10-17 12:03:58.211 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarPath], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsVerified], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[Patronymic], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[Surname], [a].[TaxId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__get_Item_0
2025-10-17 12:03:58.217 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.DTOs.Identity.ProfileDto'.
2025-10-17 12:03:58.217 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-17 12:03:58.222 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI) in 24.2587ms
2025-10-17 12:03:58.223 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI)'
2025-10-17 12:03:58.224 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Account/GetRole - 200 null application/json; charset=utf-8 42.0204ms
2025-10-17 12:03:58.229 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.ProfileController.Me (Bank.API.WebUI) in 30.2891ms
2025-10-17 12:03:58.231 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.ProfileController.Me (Bank.API.WebUI)'
2025-10-17 12:03:58.232 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Profile/Me - 200 null application/json; charset=utf-8 50.5346ms
2025-10-17 12:03:58.565 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7280/api/CardTariffs/GetPage - null null
2025-10-17 12:03:58.568 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:03:58.571 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7280/api/CardTariffs/GetPage - 204 null null 6.4292ms
2025-10-17 12:03:58.578 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/CardTariffs/GetPage - null null
2025-10-17 12:03:58.582 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:03:58.583 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.BankProducts.CardTariffsController.GetPage (Bank.API.WebUI)'
2025-10-17 12:03:58.592 +03:00 [INF] Route matched with {action = "GetPage", controller = "CardTariffs"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPage(Bank.API.Application.Helpers.HelperClasses.Filters.BankProducts.CardTariffsFilter) on controller Bank.API.WebUI.Controllers.BankProducts.CardTariffsController (Bank.API.WebUI).
2025-10-17 12:03:58.619 +03:00 [INF] Trying to get cards tariffs page
2025-10-17 12:03:58.633 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AnnualMaintenanceCost], [c].[BIN], [c].[BankId], [c].[CardColor], [c].[CardName], [c].[EnableCurrency], [c].[EnabledPaymentSystems], [c].[InterestRate], [c].[Level], [c].[MaxCreditLimit], [c].[P2PInternalCommission], [c].[Type], [c].[ValidityPeriod]
FROM [CardTariffs] AS [c]
ORDER BY [c].[CardName] DESC, [c].[Id]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-10-17 12:03:58.692 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [CardTariffs] AS [c]
2025-10-17 12:03:58.696 +03:00 [INF] Success getting cards tariffs page
2025-10-17 12:03:58.697 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.Helpers.HelperClasses.PageResult`1[[Bank.API.Application.DTOs.BankProducts.CardTariffsDto, Bank.API.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-17 12:03:58.712 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.BankProducts.CardTariffsController.GetPage (Bank.API.WebUI) in 117.4628ms
2025-10-17 12:03:58.714 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.BankProducts.CardTariffsController.GetPage (Bank.API.WebUI)'
2025-10-17 12:03:58.715 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/CardTariffs/GetPage - 200 null application/json; charset=utf-8 136.64ms
2025-10-17 12:03:59.708 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7280/api/UserCards/GetMyCards - null null
2025-10-17 12:03:59.713 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:03:59.716 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7280/api/UserCards/GetMyCards - 204 null null 7.4361ms
2025-10-17 12:03:59.720 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/UserCards/GetMyCards - null null
2025-10-17 12:03:59.724 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:03:59.725 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.BankProducts.UserCardsController.GetMyCards (Bank.API.WebUI)'
2025-10-17 12:03:59.730 +03:00 [INF] Route matched with {action = "GetMyCards", controller = "UserCards"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyCards(Bank.API.Application.Helpers.HelperClasses.Filters.User.UserCardsFilter) on controller Bank.API.WebUI.Controllers.BankProducts.UserCardsController (Bank.API.WebUI).
2025-10-17 12:03:59.737 +03:00 [INF] Trying to get user cards page, userId: "fe961b84-6bca-4a4d-651c-08ddf20e44ce"
2025-10-17 12:03:59.749 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Balance], [u].[CVV], [u].[CardNumber], [u].[CardTariffId], [u].[ChosedPaymentSystem], [u].[ChosenCurrency], [u].[CreditLimit], [u].[ExpiryDate], [u].[Pin], [u].[Status], [u].[UserId]
FROM [UserCards] AS [u]
WHERE [u].[UserId] = @__userId_0 AND [u].[ExpiryDate] < CAST(GETDATE() AS date)
2025-10-17 12:03:59.796 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p11='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 3), @p2='?' (Size = 16), @p3='?' (DbType = Guid), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Date), @p8='?' (Size = 4), @p9='?' (DbType = Int32), @p10='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserCards] SET [Balance] = @p0, [CVV] = @p1, [CardNumber] = @p2, [CardTariffId] = @p3, [ChosedPaymentSystem] = @p4, [ChosenCurrency] = @p5, [CreditLimit] = @p6, [ExpiryDate] = @p7, [Pin] = @p8, [Status] = @p9, [UserId] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-10-17 12:03:59.808 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Balance], [u].[CVV], [u].[CardNumber], [u].[CardTariffId], [u].[ChosedPaymentSystem], [u].[ChosenCurrency], [u].[CreditLimit], [u].[ExpiryDate], [u].[Pin], [u].[Status], [u].[UserId]
FROM [UserCards] AS [u]
WHERE [u].[UserId] = @__userId_0
ORDER BY [u].[Balance] DESC, [u].[Id]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-10-17 12:03:59.821 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AnnualMaintenanceCost], [c].[BIN], [c].[BankId], [c].[CardColor], [c].[CardName], [c].[EnableCurrency], [c].[EnabledPaymentSystems], [c].[InterestRate], [c].[Level], [c].[MaxCreditLimit], [c].[P2PInternalCommission], [c].[Type], [c].[ValidityPeriod]
FROM [CardTariffs] AS [c]
2025-10-17 12:03:59.828 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [UserCards] AS [u]
WHERE [u].[Id] = @__userId_0
2025-10-17 12:03:59.831 +03:00 [INF] User cards page successfully getted, userId: "fe961b84-6bca-4a4d-651c-08ddf20e44ce"
2025-10-17 12:03:59.832 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.Helpers.HelperClasses.PageResult`1[[Bank.API.Application.DTOs.Users.UserCardsDto, Bank.API.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-17 12:03:59.844 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.BankProducts.UserCardsController.GetMyCards (Bank.API.WebUI) in 111.3167ms
2025-10-17 12:03:59.847 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.BankProducts.UserCardsController.GetMyCards (Bank.API.WebUI)'
2025-10-17 12:03:59.848 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/UserCards/GetMyCards - 200 null application/json; charset=utf-8 127.6646ms
2025-10-17 12:04:00.408 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7280/api/UserCards/GetUsersCardInfo/6c23c924-074e-4a40-90d2-6047cc0faf0e - null null
2025-10-17 12:04:00.411 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:04:00.412 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7280/api/UserCards/GetUsersCardInfo/6c23c924-074e-4a40-90d2-6047cc0faf0e - 204 null null 3.8419ms
2025-10-17 12:04:00.414 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/UserCards/GetUsersCardInfo/6c23c924-074e-4a40-90d2-6047cc0faf0e - null null
2025-10-17 12:04:00.418 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:04:00.419 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.BankProducts.UserCardsController.GetUsersCardInfo (Bank.API.WebUI)'
2025-10-17 12:04:00.423 +03:00 [INF] Route matched with {action = "GetUsersCardInfo", controller = "UserCards"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersCardInfo(System.Guid) on controller Bank.API.WebUI.Controllers.BankProducts.UserCardsController (Bank.API.WebUI).
2025-10-17 12:04:00.428 +03:00 [INF] Trying to get user card info, cardId: "6c23c924-074e-4a40-90d2-6047cc0faf0e"
2025-10-17 12:04:00.435 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Balance], [u].[CVV], [u].[CardNumber], [u].[CardTariffId], [u].[ChosedPaymentSystem], [u].[ChosenCurrency], [u].[CreditLimit], [u].[ExpiryDate], [u].[Pin], [u].[Status], [u].[UserId]
FROM [UserCards] AS [u]
WHERE [u].[Id] = @__id_0
2025-10-17 12:04:00.438 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Balance], [u].[CVV], [u].[CardNumber], [u].[CardTariffId], [u].[ChosedPaymentSystem], [u].[ChosenCurrency], [u].[CreditLimit], [u].[ExpiryDate], [u].[Pin], [u].[Status], [u].[UserId]
FROM [UserCards] AS [u]
WHERE [u].[Id] = @__id_0
2025-10-17 12:04:00.448 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AnnualMaintenanceCost], [c].[BIN], [c].[BankId], [c].[CardColor], [c].[CardName], [c].[EnableCurrency], [c].[EnabledPaymentSystems], [c].[InterestRate], [c].[Level], [c].[MaxCreditLimit], [c].[P2PInternalCommission], [c].[Type], [c].[ValidityPeriod]
FROM [CardTariffs] AS [c]
WHERE [c].[Id] = @__id_0
2025-10-17 12:04:00.462 +03:00 [INF] User cards info successfully getted, cardId: "6c23c924-074e-4a40-90d2-6047cc0faf0e"
2025-10-17 12:04:00.463 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.DTOs.Users.UserCardsDto'.
2025-10-17 12:04:00.464 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.BankProducts.UserCardsController.GetUsersCardInfo (Bank.API.WebUI) in 38.8838ms
2025-10-17 12:04:00.464 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.BankProducts.UserCardsController.GetUsersCardInfo (Bank.API.WebUI)'
2025-10-17 12:04:00.465 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/UserCards/GetUsersCardInfo/6c23c924-074e-4a40-90d2-6047cc0faf0e - 200 null application/json; charset=utf-8 51.0593ms
2025-10-17 12:04:02.814 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7280/api/Account/GetRole - null null
2025-10-17 12:04:02.817 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:04:02.818 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7280/api/Account/GetRole - 204 null null 3.6834ms
2025-10-17 12:04:02.826 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7280/api/Profile/Me - null null
2025-10-17 12:04:02.827 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/UserCards/GetUsersCardInfo/6c23c924-074e-4a40-90d2-6047cc0faf0e - null null
2025-10-17 12:04:02.829 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:04:02.831 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:04:02.832 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7280/api/Profile/Me - 204 null null 7.334ms
2025-10-17 12:04:02.834 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Account/GetRole - null null
2025-10-17 12:04:02.834 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/15/2025 16:44:52', Current time (UTC): '10/17/2025 09:04:02'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-10-17 12:04:02.837 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Profile/Me - null null
2025-10-17 12:04:02.838 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:04:02.843 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/15/2025 16:44:52', Current time (UTC): '10/17/2025 09:04:02'.
2025-10-17 12:04:02.844 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:04:02.846 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/15/2025 16:44:52', Current time (UTC): '10/17/2025 09:04:02'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-10-17 12:04:02.847 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-17 12:04:02.848 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/15/2025 16:44:52', Current time (UTC): '10/17/2025 09:04:02'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-10-17 12:04:02.850 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/15/2025 16:44:52', Current time (UTC): '10/17/2025 09:04:02'.
2025-10-17 12:04:02.851 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-17 12:04:02.853 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '10/15/2025 16:44:52', Current time (UTC): '10/17/2025 09:04:02'.
2025-10-17 12:04:02.853 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI)'
2025-10-17 12:04:02.854 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/UserCards/GetUsersCardInfo/6c23c924-074e-4a40-90d2-6047cc0faf0e - 401 0 null 27.6894ms
2025-10-17 12:04:02.856 +03:00 [INF] Route matched with {action = "GetRole", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRole() on controller Bank.API.WebUI.Controllers.AccountController (Bank.API.WebUI).
2025-10-17 12:04:02.855 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-17 12:04:02.857 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7280/api/Account/Refresh - null 0
2025-10-17 12:04:02.860 +03:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-10-17 12:04:02.860 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-17 12:04:02.861 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:04:02.862 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI) in 2.4795ms
2025-10-17 12:04:02.862 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Profile/Me - 401 0 null 25.4825ms
2025-10-17 12:04:02.863 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.AccountController.Refresh (Bank.API.WebUI)'
2025-10-17 12:04:02.864 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI)'
2025-10-17 12:04:02.867 +03:00 [INF] Route matched with {action = "Refresh", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh() on controller Bank.API.WebUI.Controllers.AccountController (Bank.API.WebUI).
2025-10-17 12:04:02.867 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Account/GetRole - 401 null application/problem+json; charset=utf-8 33.6802ms
2025-10-17 12:04:02.870 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__refreshToken_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarPath], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsVerified], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[Patronymic], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[Surname], [a].[TaxId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[RefreshToken] = @__refreshToken_0
2025-10-17 12:04:02.873 +03:00 [INF] Trying to get access token for user with email: admin@neobank.com
2025-10-17 12:04:02.874 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__user_Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2025-10-17 12:04:02.877 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-10-17 12:04:02.880 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarPath], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsVerified], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[Patronymic], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[Surname], [a].[TaxId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2025-10-17 12:04:02.884 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p23='?' (DbType = Guid), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p24='?' (Size = 4000), @p3='?' (DbType = Date), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 4000), @p17='?' (DbType = DateTime2), @p18='?' (Size = 4000), @p19='?' (Size = 4000), @p20='?' (Size = 4000), @p21='?' (DbType = Boolean), @p22='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [AvatarPath] = @p1, [ConcurrencyStamp] = @p2, [DateOfBirth] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FirstName] = @p6, [IsVerified] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [Patronymic] = @p13, [PhoneNumber] = @p14, [PhoneNumberConfirmed] = @p15, [RefreshToken] = @p16, [RefreshTokenExpiryTime] = @p17, [SecurityStamp] = @p18, [Surname] = @p19, [TaxId] = @p20, [TwoFactorEnabled] = @p21, [UserName] = @p22
OUTPUT 1
WHERE [Id] = @p23 AND [ConcurrencyStamp] = @p24;
2025-10-17 12:04:02.886 +03:00 [INF] Success getting access token for user with email: admin@neobank.com
2025-10-17 12:04:02.887 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.DTOs.Identity.AccessTokenDto'.
2025-10-17 12:04:02.887 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.AccountController.Refresh (Bank.API.WebUI) in 19.0376ms
2025-10-17 12:04:02.888 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.AccountController.Refresh (Bank.API.WebUI)'
2025-10-17 12:04:02.889 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7280/api/Account/Refresh - 200 null application/json; charset=utf-8 31.7785ms
2025-10-17 12:04:02.892 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/UserCards/GetUsersCardInfo/6c23c924-074e-4a40-90d2-6047cc0faf0e - null null
2025-10-17 12:04:02.892 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Profile/Me - null null
2025-10-17 12:04:02.892 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/Account/GetRole - null null
2025-10-17 12:04:02.894 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:04:02.895 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:04:02.897 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:04:02.897 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.BankProducts.UserCardsController.GetUsersCardInfo (Bank.API.WebUI)'
2025-10-17 12:04:02.898 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.ProfileController.Me (Bank.API.WebUI)'
2025-10-17 12:04:02.898 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI)'
2025-10-17 12:04:02.899 +03:00 [INF] Route matched with {action = "GetUsersCardInfo", controller = "UserCards"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersCardInfo(System.Guid) on controller Bank.API.WebUI.Controllers.BankProducts.UserCardsController (Bank.API.WebUI).
2025-10-17 12:04:02.900 +03:00 [INF] Route matched with {action = "Me", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Me() on controller Bank.API.WebUI.Controllers.ProfileController (Bank.API.WebUI).
2025-10-17 12:04:02.901 +03:00 [INF] Route matched with {action = "GetRole", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRole() on controller Bank.API.WebUI.Controllers.AccountController (Bank.API.WebUI).
2025-10-17 12:04:02.906 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarPath], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsVerified], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[Patronymic], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[Surname], [a].[TaxId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__get_Item_0
2025-10-17 12:04:02.907 +03:00 [INF] Trying to get user card info, cardId: "6c23c924-074e-4a40-90d2-6047cc0faf0e"
2025-10-17 12:04:02.908 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__get_Item_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[AvatarPath], [a].[ConcurrencyStamp], [a].[DateOfBirth], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[IsVerified], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[Patronymic], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[RefreshToken], [a].[RefreshTokenExpiryTime], [a].[SecurityStamp], [a].[Surname], [a].[TaxId], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__get_Item_0
2025-10-17 12:04:02.909 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.DTOs.Identity.ProfileDto'.
2025-10-17 12:04:02.910 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Balance], [u].[CVV], [u].[CardNumber], [u].[CardTariffId], [u].[ChosedPaymentSystem], [u].[ChosenCurrency], [u].[CreditLimit], [u].[ExpiryDate], [u].[Pin], [u].[Status], [u].[UserId]
FROM [UserCards] AS [u]
WHERE [u].[Id] = @__id_0
2025-10-17 12:04:02.912 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-17 12:04:02.912 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.ProfileController.Me (Bank.API.WebUI) in 8.801ms
2025-10-17 12:04:02.915 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Balance], [u].[CVV], [u].[CardNumber], [u].[CardTariffId], [u].[ChosedPaymentSystem], [u].[ChosenCurrency], [u].[CreditLimit], [u].[ExpiryDate], [u].[Pin], [u].[Status], [u].[UserId]
FROM [UserCards] AS [u]
WHERE [u].[Id] = @__id_0
2025-10-17 12:04:02.915 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI) in 8.5974ms
2025-10-17 12:04:02.916 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.ProfileController.Me (Bank.API.WebUI)'
2025-10-17 12:04:02.918 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.AccountController.GetRole (Bank.API.WebUI)'
2025-10-17 12:04:02.918 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AnnualMaintenanceCost], [c].[BIN], [c].[BankId], [c].[CardColor], [c].[CardName], [c].[EnableCurrency], [c].[EnabledPaymentSystems], [c].[InterestRate], [c].[Level], [c].[MaxCreditLimit], [c].[P2PInternalCommission], [c].[Type], [c].[ValidityPeriod]
FROM [CardTariffs] AS [c]
WHERE [c].[Id] = @__id_0
2025-10-17 12:04:02.919 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Profile/Me - 200 null application/json; charset=utf-8 26.4836ms
2025-10-17 12:04:02.919 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/Account/GetRole - 200 null application/json; charset=utf-8 27.1842ms
2025-10-17 12:04:02.922 +03:00 [INF] User cards info successfully getted, cardId: "6c23c924-074e-4a40-90d2-6047cc0faf0e"
2025-10-17 12:04:02.926 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.DTOs.Users.UserCardsDto'.
2025-10-17 12:04:02.927 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.BankProducts.UserCardsController.GetUsersCardInfo (Bank.API.WebUI) in 24.9025ms
2025-10-17 12:04:02.928 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.BankProducts.UserCardsController.GetUsersCardInfo (Bank.API.WebUI)'
2025-10-17 12:04:02.928 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/UserCards/GetUsersCardInfo/6c23c924-074e-4a40-90d2-6047cc0faf0e - 200 null application/json; charset=utf-8 36.7011ms
2025-10-17 12:04:04.222 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/UserCards/GetMyCards - null null
2025-10-17 12:04:04.225 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:04:04.227 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.BankProducts.UserCardsController.GetMyCards (Bank.API.WebUI)'
2025-10-17 12:04:04.228 +03:00 [INF] Route matched with {action = "GetMyCards", controller = "UserCards"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyCards(Bank.API.Application.Helpers.HelperClasses.Filters.User.UserCardsFilter) on controller Bank.API.WebUI.Controllers.BankProducts.UserCardsController (Bank.API.WebUI).
2025-10-17 12:04:04.231 +03:00 [INF] Trying to get user cards page, userId: "fe961b84-6bca-4a4d-651c-08ddf20e44ce"
2025-10-17 12:04:04.234 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Balance], [u].[CVV], [u].[CardNumber], [u].[CardTariffId], [u].[ChosedPaymentSystem], [u].[ChosenCurrency], [u].[CreditLimit], [u].[ExpiryDate], [u].[Pin], [u].[Status], [u].[UserId]
FROM [UserCards] AS [u]
WHERE [u].[UserId] = @__userId_0 AND [u].[ExpiryDate] < CAST(GETDATE() AS date)
2025-10-17 12:04:04.238 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p11='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 3), @p2='?' (Size = 16), @p3='?' (DbType = Guid), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Date), @p8='?' (Size = 4), @p9='?' (DbType = Int32), @p10='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserCards] SET [Balance] = @p0, [CVV] = @p1, [CardNumber] = @p2, [CardTariffId] = @p3, [ChosedPaymentSystem] = @p4, [ChosenCurrency] = @p5, [CreditLimit] = @p6, [ExpiryDate] = @p7, [Pin] = @p8, [Status] = @p9, [UserId] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-10-17 12:04:04.241 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Balance], [u].[CVV], [u].[CardNumber], [u].[CardTariffId], [u].[ChosedPaymentSystem], [u].[ChosenCurrency], [u].[CreditLimit], [u].[ExpiryDate], [u].[Pin], [u].[Status], [u].[UserId]
FROM [UserCards] AS [u]
WHERE [u].[UserId] = @__userId_0
ORDER BY [u].[Balance] DESC, [u].[Id]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-10-17 12:04:04.243 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AnnualMaintenanceCost], [c].[BIN], [c].[BankId], [c].[CardColor], [c].[CardName], [c].[EnableCurrency], [c].[EnabledPaymentSystems], [c].[InterestRate], [c].[Level], [c].[MaxCreditLimit], [c].[P2PInternalCommission], [c].[Type], [c].[ValidityPeriod]
FROM [CardTariffs] AS [c]
2025-10-17 12:04:04.246 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [UserCards] AS [u]
WHERE [u].[Id] = @__userId_0
2025-10-17 12:04:04.247 +03:00 [INF] User cards page successfully getted, userId: "fe961b84-6bca-4a4d-651c-08ddf20e44ce"
2025-10-17 12:04:04.248 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.Helpers.HelperClasses.PageResult`1[[Bank.API.Application.DTOs.Users.UserCardsDto, Bank.API.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-17 12:04:04.249 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.BankProducts.UserCardsController.GetMyCards (Bank.API.WebUI) in 18.5173ms
2025-10-17 12:04:04.250 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.BankProducts.UserCardsController.GetMyCards (Bank.API.WebUI)'
2025-10-17 12:04:04.251 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/UserCards/GetMyCards - 200 null application/json; charset=utf-8 29.2633ms
2025-10-17 12:04:05.054 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/UserCards/GetUsersCardInfo/6c23c924-074e-4a40-90d2-6047cc0faf0e - null null
2025-10-17 12:04:05.058 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:04:05.059 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.BankProducts.UserCardsController.GetUsersCardInfo (Bank.API.WebUI)'
2025-10-17 12:04:05.062 +03:00 [INF] Route matched with {action = "GetUsersCardInfo", controller = "UserCards"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersCardInfo(System.Guid) on controller Bank.API.WebUI.Controllers.BankProducts.UserCardsController (Bank.API.WebUI).
2025-10-17 12:04:05.074 +03:00 [INF] Trying to get user card info, cardId: "6c23c924-074e-4a40-90d2-6047cc0faf0e"
2025-10-17 12:04:05.076 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Balance], [u].[CVV], [u].[CardNumber], [u].[CardTariffId], [u].[ChosedPaymentSystem], [u].[ChosenCurrency], [u].[CreditLimit], [u].[ExpiryDate], [u].[Pin], [u].[Status], [u].[UserId]
FROM [UserCards] AS [u]
WHERE [u].[Id] = @__id_0
2025-10-17 12:04:05.079 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Balance], [u].[CVV], [u].[CardNumber], [u].[CardTariffId], [u].[ChosedPaymentSystem], [u].[ChosenCurrency], [u].[CreditLimit], [u].[ExpiryDate], [u].[Pin], [u].[Status], [u].[UserId]
FROM [UserCards] AS [u]
WHERE [u].[Id] = @__id_0
2025-10-17 12:04:05.081 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AnnualMaintenanceCost], [c].[BIN], [c].[BankId], [c].[CardColor], [c].[CardName], [c].[EnableCurrency], [c].[EnabledPaymentSystems], [c].[InterestRate], [c].[Level], [c].[MaxCreditLimit], [c].[P2PInternalCommission], [c].[Type], [c].[ValidityPeriod]
FROM [CardTariffs] AS [c]
WHERE [c].[Id] = @__id_0
2025-10-17 12:04:05.084 +03:00 [INF] User cards info successfully getted, cardId: "6c23c924-074e-4a40-90d2-6047cc0faf0e"
2025-10-17 12:04:05.084 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.DTOs.Users.UserCardsDto'.
2025-10-17 12:04:05.085 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.BankProducts.UserCardsController.GetUsersCardInfo (Bank.API.WebUI) in 12.3867ms
2025-10-17 12:04:05.086 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.BankProducts.UserCardsController.GetUsersCardInfo (Bank.API.WebUI)'
2025-10-17 12:04:05.087 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/UserCards/GetUsersCardInfo/6c23c924-074e-4a40-90d2-6047cc0faf0e - 200 null application/json; charset=utf-8 32.828ms
2025-10-17 12:04:10.525 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7280/api/UserCards/GetUsersCardInfo/6c23c924-074e-4a40-90d2-6047cc0faf0e - null null
2025-10-17 12:04:10.525 +03:00 [INF] Trying to read info from rabbit mq
2025-10-17 12:04:10.527 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:04:10.528 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7280/api/UserCards/GetUsersCardInfo/6c23c924-074e-4a40-90d2-6047cc0faf0e - 204 null null 3.0668ms
2025-10-17 12:04:10.530 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/UserCards/GetUsersCardInfo/6c23c924-074e-4a40-90d2-6047cc0faf0e - null null
2025-10-17 12:04:10.533 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:04:10.533 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.BankProducts.UserCardsController.GetUsersCardInfo (Bank.API.WebUI)'
2025-10-17 12:04:10.534 +03:00 [INF] Trying to update balance
2025-10-17 12:04:10.534 +03:00 [INF] Route matched with {action = "GetUsersCardInfo", controller = "UserCards"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersCardInfo(System.Guid) on controller Bank.API.WebUI.Controllers.BankProducts.UserCardsController (Bank.API.WebUI).
2025-10-17 12:04:10.537 +03:00 [INF] Trying to get user card info, cardId: "6c23c924-074e-4a40-90d2-6047cc0faf0e"
2025-10-17 12:04:10.537 +03:00 [INF] Trying update balance for cards
2025-10-17 12:04:10.539 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Balance], [u].[CVV], [u].[CardNumber], [u].[CardTariffId], [u].[ChosedPaymentSystem], [u].[ChosenCurrency], [u].[CreditLimit], [u].[ExpiryDate], [u].[Pin], [u].[Status], [u].[UserId]
FROM [UserCards] AS [u]
WHERE [u].[Id] = @__id_0
2025-10-17 12:04:10.540 +03:00 [INF] Trying update balance for card "6c23c924-074e-4a40-90d2-6047cc0faf0e"
2025-10-17 12:04:10.541 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Balance], [u].[CVV], [u].[CardNumber], [u].[CardTariffId], [u].[ChosedPaymentSystem], [u].[ChosenCurrency], [u].[CreditLimit], [u].[ExpiryDate], [u].[Pin], [u].[Status], [u].[UserId]
FROM [UserCards] AS [u]
WHERE [u].[Id] = @__id_0
2025-10-17 12:04:10.542 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Balance], [u].[CVV], [u].[CardNumber], [u].[CardTariffId], [u].[ChosedPaymentSystem], [u].[ChosenCurrency], [u].[CreditLimit], [u].[ExpiryDate], [u].[Pin], [u].[Status], [u].[UserId]
FROM [UserCards] AS [u]
WHERE [u].[Id] = @__id_0
2025-10-17 12:04:10.544 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AnnualMaintenanceCost], [c].[BIN], [c].[BankId], [c].[CardColor], [c].[CardName], [c].[EnableCurrency], [c].[EnabledPaymentSystems], [c].[InterestRate], [c].[Level], [c].[MaxCreditLimit], [c].[P2PInternalCommission], [c].[Type], [c].[ValidityPeriod]
FROM [CardTariffs] AS [c]
WHERE [c].[Id] = @__id_0
2025-10-17 12:04:10.546 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p11='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 3), @p2='?' (Size = 16), @p3='?' (DbType = Guid), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Date), @p8='?' (Size = 4), @p9='?' (DbType = Int32), @p10='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserCards] SET [Balance] = @p0, [CVV] = @p1, [CardNumber] = @p2, [CardTariffId] = @p3, [ChosedPaymentSystem] = @p4, [ChosenCurrency] = @p5, [CreditLimit] = @p6, [ExpiryDate] = @p7, [Pin] = @p8, [Status] = @p9, [UserId] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-10-17 12:04:10.547 +03:00 [INF] User cards info successfully getted, cardId: "6c23c924-074e-4a40-90d2-6047cc0faf0e"
2025-10-17 12:04:10.549 +03:00 [INF] Success update balance for card "6c23c924-074e-4a40-90d2-6047cc0faf0e"
2025-10-17 12:04:10.549 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.DTOs.Users.UserCardsDto'.
2025-10-17 12:04:10.550 +03:00 [INF] Success update balance for cards
2025-10-17 12:04:10.551 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.BankProducts.UserCardsController.GetUsersCardInfo (Bank.API.WebUI) in 14.591ms
2025-10-17 12:04:10.553 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.BankProducts.UserCardsController.GetUsersCardInfo (Bank.API.WebUI)'
2025-10-17 12:04:10.553 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/UserCards/GetUsersCardInfo/6c23c924-074e-4a40-90d2-6047cc0faf0e - 200 null application/json; charset=utf-8 23.1876ms
2025-10-17 12:04:10.604 +03:00 [INF] Sending response to transaction service
2025-10-17 12:04:10.700 +03:00 [INF] Success updating balance
2025-10-17 12:04:12.837 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7280/api/UserCards/GetMyCards - null null
2025-10-17 12:04:12.841 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:04:12.842 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7280/api/UserCards/GetMyCards - 204 null null 5.9351ms
2025-10-17 12:04:12.844 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/UserCards/GetMyCards - null null
2025-10-17 12:04:12.847 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:04:12.847 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.BankProducts.UserCardsController.GetMyCards (Bank.API.WebUI)'
2025-10-17 12:04:12.848 +03:00 [INF] Route matched with {action = "GetMyCards", controller = "UserCards"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyCards(Bank.API.Application.Helpers.HelperClasses.Filters.User.UserCardsFilter) on controller Bank.API.WebUI.Controllers.BankProducts.UserCardsController (Bank.API.WebUI).
2025-10-17 12:04:12.851 +03:00 [INF] Trying to get user cards page, userId: "fe961b84-6bca-4a4d-651c-08ddf20e44ce"
2025-10-17 12:04:12.853 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Balance], [u].[CVV], [u].[CardNumber], [u].[CardTariffId], [u].[ChosedPaymentSystem], [u].[ChosenCurrency], [u].[CreditLimit], [u].[ExpiryDate], [u].[Pin], [u].[Status], [u].[UserId]
FROM [UserCards] AS [u]
WHERE [u].[UserId] = @__userId_0 AND [u].[ExpiryDate] < CAST(GETDATE() AS date)
2025-10-17 12:04:12.856 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p11='?' (DbType = Guid), @p0='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p1='?' (Size = 3), @p2='?' (Size = 16), @p3='?' (DbType = Guid), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = Date), @p8='?' (Size = 4), @p9='?' (DbType = Int32), @p10='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [UserCards] SET [Balance] = @p0, [CVV] = @p1, [CardNumber] = @p2, [CardTariffId] = @p3, [ChosedPaymentSystem] = @p4, [ChosenCurrency] = @p5, [CreditLimit] = @p6, [ExpiryDate] = @p7, [Pin] = @p8, [Status] = @p9, [UserId] = @p10
OUTPUT 1
WHERE [Id] = @p11;
2025-10-17 12:04:12.860 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Guid), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Balance], [u].[CVV], [u].[CardNumber], [u].[CardTariffId], [u].[ChosedPaymentSystem], [u].[ChosenCurrency], [u].[CreditLimit], [u].[ExpiryDate], [u].[Pin], [u].[Status], [u].[UserId]
FROM [UserCards] AS [u]
WHERE [u].[UserId] = @__userId_0
ORDER BY [u].[Balance] DESC, [u].[Id]
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-10-17 12:04:12.862 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AnnualMaintenanceCost], [c].[BIN], [c].[BankId], [c].[CardColor], [c].[CardName], [c].[EnableCurrency], [c].[EnabledPaymentSystems], [c].[InterestRate], [c].[Level], [c].[MaxCreditLimit], [c].[P2PInternalCommission], [c].[Type], [c].[ValidityPeriod]
FROM [CardTariffs] AS [c]
2025-10-17 12:04:12.864 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [UserCards] AS [u]
WHERE [u].[Id] = @__userId_0
2025-10-17 12:04:12.866 +03:00 [INF] User cards page successfully getted, userId: "fe961b84-6bca-4a4d-651c-08ddf20e44ce"
2025-10-17 12:04:12.866 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.Helpers.HelperClasses.PageResult`1[[Bank.API.Application.DTOs.Users.UserCardsDto, Bank.API.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-17 12:04:12.868 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.BankProducts.UserCardsController.GetMyCards (Bank.API.WebUI) in 16.7243ms
2025-10-17 12:04:12.869 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.BankProducts.UserCardsController.GetMyCards (Bank.API.WebUI)'
2025-10-17 12:04:12.870 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/UserCards/GetMyCards - 200 null application/json; charset=utf-8 26.2182ms
2025-10-17 12:04:14.684 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7280/api/CardTariffs/GetPage - null null
2025-10-17 12:04:14.687 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:04:14.688 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7280/api/CardTariffs/GetPage - 204 null null 4.3633ms
2025-10-17 12:04:14.691 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7280/api/CardTariffs/GetPage - null null
2025-10-17 12:04:14.695 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:04:14.696 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.BankProducts.CardTariffsController.GetPage (Bank.API.WebUI)'
2025-10-17 12:04:14.697 +03:00 [INF] Route matched with {action = "GetPage", controller = "CardTariffs"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPage(Bank.API.Application.Helpers.HelperClasses.Filters.BankProducts.CardTariffsFilter) on controller Bank.API.WebUI.Controllers.BankProducts.CardTariffsController (Bank.API.WebUI).
2025-10-17 12:04:14.699 +03:00 [INF] Trying to get cards tariffs page
2025-10-17 12:04:14.701 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[AnnualMaintenanceCost], [c].[BIN], [c].[BankId], [c].[CardColor], [c].[CardName], [c].[EnableCurrency], [c].[EnabledPaymentSystems], [c].[InterestRate], [c].[Level], [c].[MaxCreditLimit], [c].[P2PInternalCommission], [c].[Type], [c].[ValidityPeriod]
FROM [CardTariffs] AS [c]
ORDER BY [c].[CardName] DESC, [c].[Id]
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-10-17 12:04:14.704 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [CardTariffs] AS [c]
2025-10-17 12:04:14.705 +03:00 [INF] Success getting cards tariffs page
2025-10-17 12:04:14.706 +03:00 [INF] Executing OkObjectResult, writing value of type 'Bank.API.Application.Helpers.HelperClasses.PageResult`1[[Bank.API.Application.DTOs.BankProducts.CardTariffsDto, Bank.API.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-17 12:04:14.707 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.BankProducts.CardTariffsController.GetPage (Bank.API.WebUI) in 9.056ms
2025-10-17 12:04:14.709 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.BankProducts.CardTariffsController.GetPage (Bank.API.WebUI)'
2025-10-17 12:04:14.709 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7280/api/CardTariffs/GetPage - 200 null application/json; charset=utf-8 18.9839ms
2025-10-17 12:04:32.673 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7280/api/CardTariffs/AddCard - null null
2025-10-17 12:04:32.676 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:04:32.676 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7280/api/CardTariffs/AddCard - 204 null null 3.4842ms
2025-10-17 12:04:32.678 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7280/api/CardTariffs/AddCard - application/json 257
2025-10-17 12:04:32.680 +03:00 [INF] CORS policy execution successful.
2025-10-17 12:04:32.681 +03:00 [INF] Executing endpoint 'Bank.API.WebUI.Controllers.BankProducts.CardTariffsController.AddCard (Bank.API.WebUI)'
2025-10-17 12:04:32.684 +03:00 [INF] Route matched with {action = "AddCard", controller = "CardTariffs"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCard(Bank.API.Application.DTOs.BankProducts.CardTariffsDto) on controller Bank.API.WebUI.Controllers.BankProducts.CardTariffsController (Bank.API.WebUI).
2025-10-17 12:04:32.708 +03:00 [INF] Trying to add cards tariffs
2025-10-17 12:04:32.720 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__name_0='?' (Size = 40)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[AnnualMaintenanceCost], [c].[BIN], [c].[BankId], [c].[CardColor], [c].[CardName], [c].[EnableCurrency], [c].[EnabledPaymentSystems], [c].[InterestRate], [c].[Level], [c].[MaxCreditLimit], [c].[P2PInternalCommission], [c].[Type], [c].[ValidityPeriod]
FROM [CardTariffs] AS [c]
WHERE [c].[CardName] = @__name_0
2025-10-17 12:04:32.730 +03:00 [ERR] Error while adding cards tariffs. Card with name Black is already exists.
2025-10-17 12:04:32.732 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-10-17 12:04:32.732 +03:00 [INF] Executed action Bank.API.WebUI.Controllers.BankProducts.CardTariffsController.AddCard (Bank.API.WebUI) in 45.6969ms
2025-10-17 12:04:32.734 +03:00 [INF] Executed endpoint 'Bank.API.WebUI.Controllers.BankProducts.CardTariffsController.AddCard (Bank.API.WebUI)'
2025-10-17 12:04:32.735 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7280/api/CardTariffs/AddCard - 400 null text/plain; charset=utf-8 57.0923ms
